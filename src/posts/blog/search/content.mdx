---
title: ğŸš€ Nextjs ì •ì  ë¸”ë¡œê·¸ì— ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°
date: 2024-07-13
thumbnail: /posts/blog/search/1.png
tags: [Next.js, React, TypeScript, Zustand, Search]
category: ê¸°ìˆ 
---

# ì •ì  ë¸”ë¡œê·¸ì— ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°

## "ì–´ë”” ìˆëŠ” ê·¸ í¬ìŠ¤íŠ¸?" - ì •ì  ë¸”ë¡œê·¸ì— ê²€ìƒ‰ ê¸°ëŠ¥ ë”í•˜ê¸°
ë¸”ë¡œê·¸ë¥¼ ìŠ¤í¬ë¡¤í•˜ë‹¤ ë³´ë©´ ë¶„ëª…íˆ ì¼ë˜ í¬ìŠ¤íŠ¸ë¥¼ ì°¾ê¸° í˜ë“¤ ë•Œê°€ ìˆì£ ? 
ì˜¤ëŠ˜ì€ Zustandë¥¼ ì‚¬ìš©í•œ ìƒíƒœ ê´€ë¦¬ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ê²€ìƒ‰ì„ í†µí•´ ë¸”ë¡œê·¸ì— ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤.

## Zustandë¥¼ ì„¤ì¹˜ 
ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì„¤ì¹˜í•©ë‹ˆë‹¤.
https://www.npmjs.com/package/zustand 

```bash
npm i zustand
```

## ê²€ìƒ‰ ìƒíƒœ ê´€ë¦¬í•˜ê¸°
ë¨¼ì €, Zustandë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤. 
ì´ ìŠ¤í† ì–´ëŠ” ê²€ìƒ‰ì–´ì™€ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

```typescript
// store/searchStore.ts
import { Post } from '@/config/types';
import { create } from 'zustand';

interface SearchStore {
  searchTerm: string;
  setSearchTerm: (term: string) => void;
  searchResults: Post[];
  setSearchResults: (results: Post[]) => void;
}

export const useSearchStore = create<SearchStore>((set) => ({
  searchTerm: '',
  setSearchTerm: (term) => set({ searchTerm: term }),
  searchResults: [],
  setSearchResults: (results) => set({ searchResults: results }),
}));
```
ì´ ìŠ¤í† ì–´ëŠ” ê²€ìƒ‰ì–´(searchTerm)ì™€ ê²€ìƒ‰ ê²°ê³¼(searchResults)ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

## ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„

ìŠ¤í† ì–´ ì„¤ì •ì´ ëë‚¬ìœ¼ë‹ˆ, í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤. 
useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ì–´ì— ë”°ë¼ í¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§í•´ ë©”ì¸í™”ë©´ì— ë³´ì—¬ì¤ë‹ˆë‹¤.

```tsx {14}
'use client';

import { useEffect } from 'react';
import PostCard from './PostCard';
import PostList from './PostList';
import { Post } from '@/config/types';
import { useSearchStore } from '@/store/SearchStore';

interface PostListClientProps {
  initialPostList: Post[];
}

const PostListClient = ({ initialPostList }: PostListClientProps) => {
  const { searchTerm, searchResults, setSearchResults } = useSearchStore();

  useEffect(() => {
    if (searchTerm === '') {
      setSearchResults([]);
    } else {
      const results = initialPostList.filter((post) =>
        post.title.toLowerCase().includes(searchTerm.toLowerCase())
      );
      setSearchResults(results);
    }
  }, [searchTerm, initialPostList, setSearchResults]);

  const postList = searchTerm ? searchResults : initialPostList;
  const isSearching = !!searchTerm;

  return (
    <>
      {isSearching ? (
        <div className='mt-4'>
          <h2 className='mb-4 text-2xl font-bold'>ê²€ìƒ‰ ê²°ê³¼</h2>
          {postList.length > 0 ? (
            <ul className='grid grid-cols-1 gap-3 md:grid-cols-1 lg:gap-4'>
              {postList.map((post) => (
                <PostCard key={post.url + post.date} post={post} />
              ))}
            </ul>
          ) : (
            <p>ì¡°íšŒ ëœ í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          )}
        </div>
      ) : (
        <PostList postList={postList} />
      )}
    </>
  );
};

export default PostListClient;
```
ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê²€ìƒ‰ì–´ì— ë”°ë¼ í¬ìŠ¤íŠ¸ ëª©ë¡ì„ í•„í„°ë§í•˜ê³ , ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

## SearchBar ì¶”ê°€
ë§ˆì§€ë§‰ìœ¼ë¡œ, í—¤ë”ì— ê²€ìƒ‰ ë°”ë¥¼ ì¶”ê°€í•´ë³´ê² ìŠµë‹ˆë‹¤. 
í—¤ë”ì™€ ë©”ì¸ì—ì„œ ê²€ìƒ‰ê³¼ í¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì£¼ëŠ” êµ¬ì—­ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ìƒíƒœê´€ë¦¬ë¥¼ ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```tsx {9,21}
'use client';

import React, { useState } from 'react';

import { useSearchStore } from '@/store/SearchStore';
import clsx from 'clsx';

const SearchBar = () => {
  const { searchTerm, setSearchTerm } = useSearchStore();
  const [isFocused, setIsFocused] = useState(false);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setSearchTerm(e.target.value);
  };

  return (
    <div className={clsx('relative mx-auto w-full max-w-xs sm:max-w-sm', isFocused && 'z-10')}>
      <input
        type='text'
        value={searchTerm}
        onChange={handleChange}
        onFocus={() => setIsFocused(true)}
        onBlur={() => setIsFocused(false)}
        placeholder='Search...'
        className={clsx(
          'w-32 rounded-lg border bg-gray-100 py-1.5 pl-8 pr-3 text-xs text-gray-700 sm:w-full sm:py-2 sm:text-sm',
          'focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500',
          isFocused ? 'border-blue-500' : 'border-gray-300'
        )}
      />
      <div className='absolute inset-y-0 left-0 flex items-center pl-2'>
        <svg
          xmlns='http://www.w3.org/2000/svg'
          className='h-3 w-3 text-gray-400 sm:h-4 sm:w-4'
          fill='none'
          viewBox='0 0 24 24'
          stroke='currentColor'
        >
          <path
            strokeLinecap='round'
            strokeLinejoin='round'
            strokeWidth='2'
            d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'
          />
        </svg>
      </div>
    </div>
  );
};

export default SearchBar;
```
## Header ì¶”ê°€
í—¤ë”ì— ê²€ìƒ‰ ë°”ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```tsx {23}
'use client';

import Link from 'next/link';
import ScrollProgressBar from '@/components/common/ScrollProgressBar';
import SearchBar from '@/components/common/SearchBar';
import { useSpyElem } from '@/hook/useSpy';
import ThemeSwitch from '@/layouts/theme/Switch';

export const Header = () => {
  const { ref, marginTop } = useSpyElem(65);

  return (
    <nav
      style={{ marginTop }}
      ref={ref}
      className='fixed z-40 flex w-full flex-col items-center justify-center border-b bg-background shadow-sm'
    >
      <div className='mt-1 flex h-[52px] w-full max-width-[1200px] items-center justify-between px-4 lg:h-[64px]'>
        <div className='flex items-center text-lg font-medium'>
          <Link href='/blog'>JMLOG</Link>
        </div>
        <div className='flex items-center gap-1 lg:gap-3'>
          <SearchBar />
          <ThemeSwitch />
        </div>
      </div>
      <ScrollProgressBar />
    </nav>
  );
}
```
ì´ë ‡ê²Œ êµ¬í˜„í•˜ë©´ ì‚¬ìš©ìê°€ ê²€ìƒ‰ ë°”ë¥¼ í†µí•´ í¬ìŠ¤íŠ¸ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

## ê²°ë¡ 


<Callout type="info">
ì´ìƒìœ¼ë¡œ ì •ì  ë¸”ë¡œê·¸ì— ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. 
Zustandë¥¼ ì‚¬ìš©í•œ ìƒíƒœ ê´€ë¦¬ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ê²€ìƒ‰ êµ¬í˜„ì„ í†µí•´ ê²€ìƒ‰ì„ ì‰½ê²Œ ì‚¬ìš©í•©ë‹ˆë‹¤. 
í¬ìŠ¤íŠ¸ëŠ” ì„œë²„ì‚¬ì´ë“œë¡œ ê°€ì ¸ì˜¤ê³  ê²€ìƒ‰ì€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œë¡œ ê°€ì ¸ì™€ì„œ
ì„œë²„ì— ë¶€í•˜ì—†ì´ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>
